!function(e){var n=e.tmpl.complete,t=e.fn.domManip;e.tmpl.complete=function(t){var r;n(t);for(r in t)r=t[r],r.addedTmplItems&&-1===e.inArray(r,r.addedTmplItems)&&r.addedTmplItems.push(r);for(r in t)r=t[r],r.rendered&&r.rendered(r)},e.extend({tmplCmd:function(n,t,r){function a(e,n){for(var t,r,a,o=[],p=n.length,l=0,c=e.length;c>l;)for(a=e[l++],r=0;p>r;)t=n[r++],t.data===a&&o.push(t);return o}var o,p=[];switch(t=e.isArray(t)?t:[t],n){case"find":return a(t,r);case"replace":t.reverse()}return e.each(r?a(t,r):t,function(t,a){switch(coll=a.nodes,n){case"update":a.update();break;case"remove":e(coll).remove(),r&&r.splice(e.inArray(a,r),1);break;case"replace":o=o?e(coll).insertBefore(o)[0]:e(coll).appendTo(coll[0].parentNode)[0],p.unshift(a)}}),p}}),e.fn.extend({domManip:function(n,r,a){var o,p=n[1],l=n[0];return!(n.length>=2&&"object"==typeof p)||p.nodeType||p instanceof e?t.apply(this,arguments):(o=e.makeArray(arguments),o[0]=[e.tmpl(e.template(l),p,n[2],n[3])],o[2]=function(n){e.tmpl.afterManip(this,n,a)},t.apply(this,o))}})}(jQuery);