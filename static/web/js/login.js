!function(e,r){htLogin={init:function(){ht.util.placeholder(),this.bindEvent(),this.switchTab()},switchTab:function(){$("#loginTab a").click(function(){$(this).addClass("active").siblings().removeClass("active");var e=$(this).index();$(".boxwrap").eq(e).show().siblings(".boxwrap").hide()})},validate:{chkPhone:function(e){var r=!1,n=e;return""==n.val()?(n.parent().next(".error").html("请输入手机号码"),n.parent().removeClass("err_label").addClass("err_label")):/^1\d{10}$/.test(n.val())?(n.parent().next(".error").html(""),n.parent().removeClass("err_label"),r=!0):(n.parent().next(".error").html("手机号码格式不正确"),n.parent().removeClass("err_label").addClass("err_label")),r},chkKapkey:function(){var e=!1,r=$("#kapkey");return""==r.val()?(r.parent().next(".error").html("请输入图片验证码"),r.parent().removeClass("err_label").addClass("err_label")):6!=r.val().length?(r.parent().next(".error").html("图片验证码错误"),r.parent().removeClass("err_label").addClass("err_label")):(r.parent().next(".error").html(""),r.parent().removeClass("err_label"),e=!0),e=!0},chkSmsCode:function(){var e=!1,r=$("#smskey");return""==r.val()?(r.parent().next(".error").html("请输入短信验证码"),r.parent().removeClass("err_label").addClass("err_label")):6!=r.val().length?(r.parent().next(".error").html("短信验证码错误"),r.parent().removeClass("err_label").addClass("err_label")):(r.parent().next(".error").html(""),r.parent().removeClass("err_label"),e=!0),e},chkPassword:function(e){var r=!1;return e.val().length<6||e.val().length>18?(e.parent().next(".error").html("请输入正确的密码"),e.parent().removeClass("err_label").addClass("err_label")):(e.parent().next(".error").html(""),e.parent().removeClass("err_label"),r=!0),r},chkSmskeyword:function(e){var r=!1;return 4!=e.val().length?(e.parent().parent().next(".error").html("请输入动态密码"),e.parent().removeClass("err_label").addClass("err_label")):(e.parent().parent().next(".error").html(""),e.parent().removeClass("err_label"),r=!0),r}},bindEvent:function(){var r=$("#phone"),n=$("#kapkey"),t=$("#password");r.focus(function(){}).blur(function(){htLogin.validate.chkPhone(r)}),t.blur(function(){htLogin.validate.chkPassword(t)}).keyup(function(e){13==e.keyCode&&$("#phoneloginBtn").click()}),n.focus(function(){}).blur(function(){htLogin.validate.chkKapkey()}),$("#phoneloginBtn").click(function(){var n=htLogin.validate.chkPhone(r),a=htLogin.validate.chkPassword(t);if(n&&a){var l={login_type:"usename",usename:r.val(),password:t.val(),_xsrf:$("input[name=_xsrf]").val()};$.post("/login.html",l,function(r){var r=JSON.parse(r);return 200!=r.state?($("#LoginAccountInfo").html(r.info).show(),!1):void(e.location.href=ht.util.login.getNext())})}}),$("#getKeyWord").click(function(){var e=$("#smsphone"),r=htLogin.validate.chkPhone(e);if(!r)return!1;if($(this).hasClass("btn_enabled"))return!1;var n={phone:e.val()},t=60;$("#getKeyWord").html("重新获取("+t+")").attr("v",t).addClass("btn_enabled"),$.get("/common/phone/code/",n,function(){ht.util.setCountDown($("#getKeyWord"),"获取动态密码")})}),$("#smsloginBtn").click(function(){var r=$("#smsphone"),n=$("#smskeyword"),t=htLogin.validate.chkPhone(r),a=htLogin.validate.chkSmskeyword(n);if(t&&a){var l={login_type:"phone",phone:r.val(),code:n.val(),_xsrf:$("input[name=_xsrf]").val()};$.post("/login.html",l,function(r){var r=JSON.parse(r);return 200!=r.state?($("#LoginPhoneInfo").html(r.info).show(),!1):void(e.location.href=ht.util.login.getNext())})}})}},$(function(){htLogin.init()})}(window);