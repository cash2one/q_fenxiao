jQuery.fn.pagination=function(e,t){return t=jQuery.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"javascript:void(0);",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,callback:function(){return!1}},t||{}),this.each(function(){function n(){return Math.ceil(e/t.items_per_page)}function a(){var e=Math.ceil(t.num_display_entries/2),a=n(),r=a-t.num_display_entries,s=i>e?Math.max(Math.min(i-e,r),0):0,p=i>e?Math.min(i+e,a):Math.min(t.num_display_entries,a);return[s,p]}function r(e,n){i=e,s();var a=t.callback(e,p);return a||(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0),a}function s(){p.empty();var e=a(),s=n(),_=function(e){return function(t){return r(e,t)}},u=function(e,n){if(e=0>e?0:s>e?e:s-1,n=jQuery.extend({text:e+1,classes:""},n||{}),e==i)var a=jQuery("<span class='current'>"+n.text+"</span>");else var a=jQuery("<a>"+n.text+"</a>").bind("click",_(e)).attr("href",t.link_to.replace(/__id__/,e));n.classes&&a.addClass(n.classes),p.append(a)};if(t.prev_text&&(i>0||t.prev_show_always)&&u(i-1,{text:t.prev_text,classes:"prevPage"}),e[0]>0&&t.num_edge_entries>0){for(var l=Math.min(t.num_edge_entries,e[0]),c=0;l>c;c++)u(c);t.num_edge_entries<e[0]&&t.ellipse_text&&jQuery("<em>"+t.ellipse_text+"</em>").appendTo(p)}for(var c=e[0];c<e[1];c++)u(c);if(e[1]<s&&t.num_edge_entries>0){s-t.num_edge_entries>e[1]&&t.ellipse_text&&jQuery("<em>"+t.ellipse_text+"</em>").appendTo(p);for(var o=Math.max(s-t.num_edge_entries,e[1]),c=o;s>c;c++)u(c)}t.next_text&&(s-1>i||t.next_show_always)&&u(i+1,{text:t.next_text,classes:"nextPage"});var m="";m+='<span class="jumptoTip">到第</span>',m+='<input type="text" value="" class="jumptoTxt" />',m+='<span class="jumptoTip">页</span>',m+='<a href="javascript:void(0);" class="jumptoBtn">确定</a>',m="",p.append(m)}var i=t.current_page;e=!e||0>e?1:e,t.items_per_page=!t.items_per_page||t.items_per_page<0?1:t.items_per_page;var p=jQuery(this);this.selectPage=function(e){r(e)},this.prevPage=function(){return i>0?(r(i-1),!0):!1},this.nextPage=function(){return i<n()-1?(r(i+1),!0):!1},s(),t.callback(i,this)})};