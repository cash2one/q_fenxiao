I$(236,function(e,t,i,o,a,l,_,s,n,r,g,c,m,d,h,b,p,u,f,T,$){p._$$IndexModule=e._$klass(),pro=p._$$IndexModule._$extend(l),pro.__init=function(e){this.__supInit(e),this.__getNodes(),this.__addEvent(),s(".m-imgslider-wrap .imgpagebox").length&&_._$allocate({box:s(".m-imgslider-wrap .m-slide")[0],loop:!0,auto:!0,scrollTime:200,callback:this._$sliderChange()}),this.__initGlobalTemai(),a._$$LazyImage._$allocate({attr:"src",oncheck:function(e){var t=e.target.getAttribute("data-src");if(t){var i=e.target.getAttribute("src");i&&i===t&&(e.value=0)}else e.value=0},onremove:function(e){e.stopped=!0}});var t=navigator.userAgent,i=!!t.match(/(iPhone|iPod|iPad)/i);this.__globalpickTpl=c._$add(g);var o="kaola://"+location.host+location.pathname;i&&(o="kaola://"),b._$open({openUrl:o,action:"open"})},pro.__getNodes=function(){this.__globalPick=document.querySelector(".m-globalpick"),this.__go2Web=o._$get("toweb")},pro.__addEvent=function(){},pro.__triggerScrollEvt=function(){return r.debounce(function(){i._$dispatchEvent(window,"scroll")},200,!1)}(),pro.__classReg=function(e){return new RegExp("(\\s|^)"+e+"(\\s|$)")},pro.__findParent=function(e,t){for(var i=e;i&&"body"!=i.tagName.toLowerCase();){if(t.test(i.className))return i;i=i.parentNode}return null},pro.__heightProcess=function(e){var t=this.__classReg("imglist"),i=this.__findParent(e.target,t);if(i&&"3"===i.getAttribute("data-type")){if(i._banImgLoadCount=(i._banImgLoadCount||0)+1,3!==i._banImgLoadCount)return;var o=i.querySelectorAll("img");3===o.length&&o[0].height!==o[1].height+o[2].height&&(o[0].height=o[1].height+o[2].height)}},pro.__bannerlazyImgProcess=function(e){var t=this.__classReg("imglist"),i=this.__classReg("s\\-lazy\\-loading"),o=this.__findParent(e.target,t);o&&i.test(o.className)&&(o.className=o.className.replace(i," ")),this.__triggerScrollEvt()},pro._$sliderChange=function(){var e=s(".m-imgslider-wrap .imgpagebox");return function(t){e._$children(".active",!0)._$delClassName("active"),e._$children(".dot",!0)._$get(t,!0)._$addClassName("active")}},pro.__lazyImgLoad=function(e){var t=this.__classReg("loading");t.test(e.target.className)&&(e.target.className=e.target.className.replace(t," ")),this.__triggerScrollEvt()},pro.__initGlobalTemai=function(){var e=this.__globalTemai={},t=s(".m-img-temai .timer-wrap"),i=t._$attr("data-servertime");e._openTime=+new Date,e._remainTime=parseFloat(t._$attr("data-timeleft"))||0,e._needTimer=!0;try{sessionStorage.getItem("globalTemaiTimer")===i?e._openTime=parseFloat(sessionStorage.getItem("globalTemaiPageLoad"))||e._openTime:(sessionStorage.setItem("globalTemaiTimer",i),sessionStorage.setItem("globalTemaiPageLoad",e._openTime))}catch(o){}if(this.__setRemainText(e._remainTime),e._remainTime<=0)e._needTimer=!1;else var a=setInterval(function(){var e=this.__globalTemai._remainTime-(+new Date-this.__globalTemai._openTime);0>=e?(e=0,clearInterval(a),this.__refreshTemai()):this.__setRemainText(e)}._$bind(this),1e3)},pro.__setRemainText=function(e){},pro.__refreshTemai=function(){this.__getNewTemai(function(e,t){if(!e&&t.globalTemai&&t.globalTemai.slidGoodsList&&t.globalTemai.slidGoodsList.length>0){for(var i,o="",a=0;a<t.globalTemai.slidGoodsList.length;a++)i=t.globalTemai.slidGoodsList[a],o+='<a href="/product/'+i.goodsId+'.html"><img src="'+r.imgThumbnailUrl(i.imageUrl,600)+'"></a>';s(".m-img-temai .imgs")._$html(o),s(".m-img-temai .timer-wrap")._$attr("data-timeleft",t.globalTemai.endTimestamp-t.serverTime),this.__initGlobalTemai()}else s(".m-img-temai")._$style("display","none")}._$bind(this))},pro.__getNewTemai=function(e){n("/home/globaltemai.html",{method:"GET",norest:!0,type:"json",onload:function(t){t&&1==t.code&&t.body?e&&e(null,t.body):e&&e(1,t)},onerror:function(t){e&&e(1,t)}})},pro.__globalPickScrollCheck=function(){"undefined"==typeof this.__globalPick.__hasMore&&(this.__globalPick.__hasMore=!!this.__globalPick.getAttribute("data-hasmore"),this.__globalPick.__current=1);var e=this.__globalPick.getBoundingClientRect(),t=e.top+e.height-window.innerHeight;"undefined"!=typeof this.__globalPick.__lastOffsetTop&&(this.__globalPick.__lastOffsetTop>=t?this.__globalPick.__orient="flipdown":this.__globalPick.__orient="flipup"),this.__globalPick.__lastOffsetTop=t,240>=t&&!this.__globalPick.__loading&&this.__globalPick.__hasMore&&"flipdown"===this.__globalPick.__orient&&(s(".m-globalpick .m-loading")._$style("display","block"),this.__getGlobalPickList())},pro.__getGlobalPickList=function(){var e=10,t="网络异常";this.__globalPick.__loading=!0;var i={query:{offset:this.__globalPick.__current*e,limit:e},norest:!0,type:"json",method:"get",onload:function(e){if(e&&1===e.code&&e.body){var i=e.body,o=i.globalPick.data;if(this.__globalPick.__current+=1,this.__globalPick.__loading=!1,this.__globalPick.__hasMore=i.hasMore,o.length){var a=c._$get(this.__globalpickTpl,{list:o});this.__globalPick.querySelector(".onsale-wrap").appendChild(s(a)[0])}i.hasMore||(this.__globalPick.querySelector(".nomore-data").style.display="block",s(".m-docfoot")._$style("display","block")),this.__fireScrollEvt()}else s(".m-docfoot")._$style("display","block"),h.show({type:"error",message:t,duration:2e3,singleMsg:!0}),setTimeout(function(){window.scrollBy(0,-1),this.__globalPick.__loading=!1}._$bind(this),2500);s(".m-globalpick .m-loading")._$style("display","none")}._$bind(this),onerror:function(e){s(".m-globalpick .m-loading")._$style("display","none"),s(".m-docfoot")._$style("display","block"),h.show({type:"error",message:t,duration:2e3,singleMsg:!0}),setTimeout(function(){window.scrollBy(0,-1),this.__globalPick.__loading=!1}._$bind(this),2500)}._$bind(this)};n("/home.html",i)},pro.__fireScrollEvt=function(){return r.throttle(function(){i._$dispatchEvent(window,"scroll")},80)}(),p._$$IndexModule._$allocate()},1,2,3,4,73,7,92,93,71,54,235,40,87,94,6,82);